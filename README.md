# HomuCamera

## 概要

複数メイドプラグインで置いた任意のオブジェクトにカメラとディスプレイのペアを設定するpluginです。

## 前提
COM3D2 v2.38.0でのみ確認しています。
Sybaris2が入っていることが条件です。
複数メイドプラグインが入っていることが条件です。

## 導入方法
ゲームフォルダのSybaris\UnityInjectorにCOM3D2.HomuCamera.Plugin.dllを置いてください。

## ビルドのやり方

1. ソースコードをpullしたらsolutionファイルをVisualStudioかRiderで開いてください。
2. 参照DLLにゲームフォルダに有る下記を追加してください。
 - COM3D2x64_Data\Managed\Assembly-CSharp.dll
 - COM3D2x64_Data\Managed\Assembly-CSharp-firstpass.dll
 - COM3D2x64_Data\Managed\UnityEngine.dll
3. 参照DLLにゲームversionに対応した下記を追加してください。一応、本Repositoryにも同梱しています
 - ExIni.dll
 - UnityInjector.dll
4. ビルド 

## 起動方法
Edit画面でF2キーを押してください。Windowが起動します。Edit画面以外には対応していません。

## 使用方法
1. 複数メイドでObjectを配置してください。
2. 検索ボタンを押してください。配置されているObjectが列挙されます。
3. Cameraとして採用したいObjectとその中のMaterial、カメラのレンズの向きを決定するNormalを設定してください。
4. ディスプレイとして採用したいObjectとその中のMaterialを設定してください。
5. 必要に応じてカメラの回転（上のスライダー）と視野角（下のスライダー）を調整してください。
6. 設定ボタンを押してください。

## カメラ仕様
カメラはマテリアルに割りあたっているメッシュのすべての法線ベクトルを取り出します。
そのためカメラにしたいMODにはあらかじめレンズ部分に平面のマテリアルを割り当てるのをおすすめします。
カメラの配置はマテリアルに割りあたっているメッシュの中心になります。

## ディスプレイ仕様
ディスプレイは対象のマテリアルのテクスチャをすげ替えます。 そのためディスプレイにしたい部分にはユニークなマテリアルが設定されていることが必要です。
ディスプレイにしたいMODにはあらかじめディスプレイ部分にユニークなマテリアルが割あたっているか確認してください。
